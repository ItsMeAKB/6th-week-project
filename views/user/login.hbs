<link rel="stylesheet" href="/public/styles/userlogin.css">
<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Login form -->
<form action="/user/login" method="post" id="login">
  <!-- Left section of the form -->
  <div class="left">
    <div>
      <p>Hello, Welcome!</p>
      <a href="#">Don't have an account?</a>
      <input type="button" id="rgbtn" value="Register" />
    </div>
  </div>

  <!-- Right section of the form -->
  <div class="right">
    <div>
      <h1>Login</h1>

      <!-- ✅ Correct name attributes -->
      <input type="text" name="email" id="email" placeholder="Email" autocomplete="off" />
      <input type="password" name="password" id="password" placeholder="Password" autocomplete="new-password" />

      <a href="#">Forgot Password?</a>
      <button type="submit">Login</button>
    </div>
  </div>
</form>


  {{#if message}}
  <script>
    Swal.fire({
      icon: 'error',
      title: 'Login Failed',
      text: '{{message}}',
    });
  </script>
  {{/if}}


<script>
  // Register redirect
  document.getElementById("rgbtn").addEventListener("click", function () {
    console.log("clicked");
    window.location.href = "/user/register";
  });

  // Validation
  document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("login").addEventListener("submit", formvalidate);
  });

  function formvalidate(e) {
    e.preventDefault();

    var email = document.getElementById("email").value.trim();
    var password = document.getElementById("password").value.trim();

    if (email === "" || password === "") {
      Swal.fire("All fields are required");
      return false;
    }

    // ✅ Submit the form if valid
    e.target.submit();
  }
</script>
